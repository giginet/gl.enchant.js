(function(){var b,e,c,g,a;var d=Object.prototype.hasOwnProperty,f=function(k,i){for(var h in i){if(d.call(i,h)){k[h]=i[h]}}function j(){this.constructor=k}j.prototype=i.prototype;k.prototype=new j;k.__super__=i.prototype;return k};a=(function(){function h(i,j){if(i==null){i=0}if(j==null){j=0}this.set(i,j)}h.prototype.set=function(i,j){if(i==null){i=0}if(j==null){j=0}this.x=i;this.y=j;return this};h.prototype.add=function(i){this.x+=i.x;this.y+=i.y;return this};h.prototype.sub=function(i){this.x-=i.x;this.y-=i.y;return this};h.prototype.scale=function(i){this.x*=i;this.y*=i;return this};h.prototype.div=function(i){this.x/=i;this.y/=i;return this};h.prototype.product=function(i){return this.x*i.x+this.y*i.y};h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};h.prototype.resize=function(i){if(this.length()){this.scale(i/this.length())}return this};h.prototype.normalize=function(){return this.resize(1)};h.prototype.angle=function(){return(180*Math.atan2(this.y,this.x))/Math.PI};h.prototype.rotate=function(l){var j,k,i,m;j=(l*Math.PI)/180;k=this.length();i=this.x;m=this.y;this.x=Math.sin(j)*m+Math.cos(j)*i;this.y=Math.cos(j)*m-Math.sin(j)*i;return this.resize(k)};h.prototype.clone=function(){return new h(this.x,this.y)};h.prototype.reverse=function(){this.x*=-1;this.y*=-1;return this};h.prototype.max=function(i){if(this.length()<=i){return this}return this.resize(i)};h.prototype.min=function(i){if(this.length()>=i){return this}return this.resize(i)};h.prototype.isZero=function(){return this.x===0&&this.y===0};return h})();Array.prototype._index=function(h){var i;if(h<0){i=this.length;return i+h}return h};Array.prototype.at=function(h){return this[this._index(h)]};Array.prototype.map=function(h){var j,i;return([].splice.apply(this,[0,this.length-0].concat(i=(function(){var m,l,k;k=[];for(m=0,l=this.length;m<l;m++){j=this[m];k.push(h(j))}return k}).call(this))),i)};Array.prototype.clone=function(){return this.dup()};Array.prototype.dup=function(){return this.slice(0,this.length)};Array.prototype.each=function(i){var h,j;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){i(this[h],h)}return this};Array.prototype.deleteAt=function(h){h=this._index(h);if(h>=this.length){return}return this.splice(h,1)};Array.prototype.deleteIf=function(j){var h;return this.replace((function(){var k,i;i=[];for(h=0,k=this.length;0<=k?h<k:h>k;0<=k?h++:h--){if(!j(this[h],h)){i.push(this[h])}}return i}).call(this))};Array.prototype.reject=function(h){var i;i=this.length;this.deleteIf(h);if(i===this.length){return}return this};Array.prototype.isEmpty=function(){return this.length===0};Array.prototype.isEql=function(h,k){var i,j;if(k==null){k=function(m,l){return m===l}}if(this.length!==h.length){return false}for(i=0,j=this.length;0<=j?i<j:i>j;0<=j?i++:i--){if(!k(this[i],h[i])){return false}}return true};Array.prototype.fill=function(l,m,h){var j,k;if(m==null){m=0}if(h==null){h=this.length-1}m=this._index(m);h=this._index(h);[].splice.apply(this,[m,h-m+1].concat(k=(function(){var i;i=[];for(j=m;m<=h?j<=h:j>=h;m<=h?j++:j--){i.push(l)}return i})())),k;return this};Array.prototype.first=function(){return this[0]};Array.prototype.last=function(){var h;h=this._index(-1);return this[h]};Array.prototype.uniq=function(l){var k,j,i,h;if(l==null){l=function(n,m){return n===m}}k=[];for(i=0,h=this.length;i<h;i++){j=this[i];if(!k.isInclude(j,l)){k.push(j)}}return this.replace(k)};Array.prototype.index=function(j,k){var h,i;if(k==null){k=function(m,l){return m===l}}for(h=0,i=this.length;0<=i?h<i:h>i;0<=i?h++:h--){if(k(this[h],j)){return h}}return};Array.prototype.indexes=function(){var j,k,i,h;h=[];for(k=0,i=arguments.length;k<i;k++){j=arguments[k];h.push(this.at(j))}return h};Array.prototype.rindex=function(j,k){var h,i;if(k==null){k=function(m,l){return m===l}}for(h=i=this.length;i<=0?h<0:h>0;i<=0?h++:h--){if(k(this[h],j)){return h}}return};Array.prototype.flatten=function(){return this.replace(this.reduce(function(i,h){return i.concat(h instanceof Array?h.flatten():h)},[]))};Array.prototype.transpose=function(){var n,m,l,k,j,o;k=this.isEmpty()?0:this.length;n=this.first() instanceof Array?this.first().length:0;if(!k||!n){return this}l=(function(){var h;h=[];for(m=0;0<=n?m<n:m>n;0<=n?m++:m--){h.push([])}return h})();for(j=0;0<=k?j<k:j>k;0<=k?j++:j--){for(o=0;0<=n?o<n:o>n;0<=n?o++:o--){l[o][j]=this[j][o]}}return this.replace(l)};Array.prototype.compact=function(){return this.deleteIf(function(h){return h===void 0})};Array.prototype.isInclude=function(k,l){var i,j,h;if(l==null){l=function(n,m){return n===m}}for(j=0,h=this.length;j<h;j++){i=this[j];if(l(i,k)){return true}}return false};Array.prototype.size=function(){return this.length};Array.prototype.swap=function(i,h){var j;i=this._index(i);h=this._index(h);j=this[i];this[i]=this[h];this[h]=j;return this};Array.prototype.shuffle=function(){var h,j;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){this.swap(h,Math.floor(Math.random()*this.length))}return this};Array.prototype.choice=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.count=function(k,l){var h,i,j;if(l==null){l=function(n,m){return n===m}}i=0;for(h=0,j=this.length;0<=j?h<j:h>j;0<=j?h++:h--){if(l(this[h],k)){++i}}return i};Array.prototype.replace=function(h){var j,k,i;this.clear();for(k=0,i=h.length;k<i;k++){j=h[k];this.push(j)}return this};Array.prototype.nitems=function(){return this.clone().compact().size()};Array.prototype.insert=function(){var k,l,j,h,m;k=Array.prototype.slice.call(arguments,0,arguments.length);if(k.size()<=1){return this}j=this._index(k[0]);h=k.slice(1,this.length);for(l=0,m=h.length;0<=m?l<m:l>m;0<=m?l++:l--){this.splice(j+l,0,h[l])}return this};Array.prototype.clear=function(){var h;h=[];while(!this.isEmpty()){h.push(this.deleteAt(0))}return h};Array.prototype.max=function(i){var h;if(i==null){i=function(k,j){if(k===j){return 0}if(k<j){return -1}else{return 1}}}h=this.first();this.reduce(function(k,j){if(i(h,j)<0){return h=j}});return h};Array.prototype.min=function(i){var h;if(i==null){i=function(k,j){if(k===j){return 0}if(k<j){return -1}else{return 1}}}h=this.first();this.reduce(function(k,j){if(i(h,j)>=0){return h=j}});return h};g=(function(){function h(i,k,m,l,j){if(k==null){k=false}if(m==null){m=0}if(l==null){l=false}if(j==null){j=void 0}this.set(i);this._time=m;this._active=l;this._complete=j;this._repeat=k}h.prototype.set=function(i){if(i==null){i=0}this._max=i;return this};h.prototype.play=function(){this._active=true;return this};h.prototype.stop=function(){this._active=false;this._time=0;return this};h.prototype.pause=function(){this._active=false;return this};h.prototype.reset=function(){this._time=0;return this};h.prototype.tick=function(){if(this._time<this._max&&this._active){++this._time;if(this._time===this._max){if(this._complete!=null){this._complete()}if(this._repeat){this._time=0}}}return this};h.prototype.now=function(){return this._time};h.prototype.max=function(){return this._max};h.prototype.setNow=function(i){this._time=i;return this};h.prototype.setComplete=function(i){this._complete=i;return this};h.prototype.setRepeat=function(i){this._repeat=i;return this};h.prototype.isActive=function(){return this._active};h.prototype.isOver=function(){return this._time>=this._max};return h})();b=(function(){function h(){}h._sounds=[];h.root="";h.load=function(){var m,i,l,k,j;i=Array.prototype.slice.call(arguments);j=[];for(l=0,k=i.length;l<k;l++){m=i[l];j.push(h._loadSound(m))}return j};h.play=function(i){if(!(h._sounds[i]!=null)){h._loadSound(i)}h.stop(i);return h._sounds[i].play()};h.pause=function(i){if(i!=null){return h._sounds[i].pause()}};h.stop=function(i){if(i!=null){return h._sounds[i].stop()}};h._loadSound=function(j,i){if(!(h._sounds[j]!=null)){if(i!=null){return h._sounds[j]=Sound.load(""+h.root+j,i)}else{return h._sounds[j]=Sound.load(""+h.root+j)}}};return h})();enchant();c=(function(){f(h,Game);h.prototype.config={WIDTH:640,HEIGHT:480,FPS:30,FONT:"Helvetica",IMAGE_PATH:"resources/images/",IMAGES:[],SOUND_PATH:"resources/sounds/",SOUNDS:[],INITIAL_LEVEL:1,LAST_LEVEL:7,LEVEL_TIME:30};function h(){var k,o,q,m,l,p,i,n,j;h.__super__.constructor.call(this,this.config.WIDTH,this.config.HEIGHT);this.fps=this.config.FPS;this.keybind(90,"a");this.keybind(88,"b");h.game=this;h.config=this.config;n=this.config.IMAGES;for(m=0,p=n.length;m<p;m++){k=n[m];this.preload(""+this.config.IMAGE_PATH+k)}b.root=this.config.SOUND_PATH;j=this.config.SOUNDS;for(l=0,i=j.length;l<i;l++){q=j[l];b._loadSound(q,"audio/wav")}o=new e();this.onload=function(){o.setup();return this.pushScene(o)};this.start()}return h})();window.onload=function(){return new c()};e=(function(){f(h,Scene);function h(){this}return h})()}).call(this);